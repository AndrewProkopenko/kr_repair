(function(){
    const anchors = document.querySelectorAll('a[href*="#"]'); 

    var ua = navigator.userAgent;  
    if (ua.search(/MSIE/) > 0) { console.log(ua) }
    else {  
        for( let anchor = 0 ; anchor < anchors.length; anchor++) { 
            anchors[anchor].addEventListener("click", function(event) { 
               
                const blockID =  anchors[anchor].getAttribute('href');
                event.preventDefault(); 
                document.querySelector('' + blockID).scrollIntoView({
                    behavior: "smooth", 
                    block: "start"
                })
            })
        }
    }
}());


// $('.js-navbar-toggle').click( headerBtnTimes)

// function headerBtnTimes() { 
//   $('.js-navbar-toggle span').toggleClass('d-none')
//   $('.js-navbar-toggle svg').toggleClass('d-none')
// }

//   // Function to make IE9+ support forEach:
//   if (window.NodeList && !NodeList.prototype.forEach) {
//     NodeList.prototype.forEach = Array.prototype.forEach; 
// }

$(document).ready(function () {
  $(".navbar-nav a").click(function (e) {
      e.preventDefault(); 
      $('.navbar-collapse.show').collapse('hide');
      $('.js-navbar-toggle span').toggleClass('d-none')
  $('.js-navbar-toggle svg').toggleClass('d-none') 
  });
});
      
$('.js-navbar-toggle').click( headerBtnTimes)

function headerBtnTimes() { 
$('.js-navbar-toggle span').toggleClass('d-none')
$('.js-navbar-toggle svg').toggleClass('d-none')
}
 
  
let modalBtn = document.querySelectorAll('.js-modal-btn a'),
    modalCont = document.querySelector('.js-modal'),
    modalCloseCont = document.querySelector('.js-modal .service-modal-container'),
    modalCloseIcon = document.querySelectorAll('.modal-close'); 
let modalContact = document.querySelector('.service-modal-container_contact'); 

 
for (let i = 0 ; i < modalBtn.length; i++) { 
    modalBtn[i].addEventListener('click', openModal)
}
 
for (let i = 0 ; i < modalCloseIcon.length; i++) { 
    modalCloseIcon[i].addEventListener('click', closeModal)
}

modalCont.addEventListener('click', closeModalProps) 
 
 

function openModal(e) {  
    document.body.classList.add('overflow-hidden')
    e.preventDefault()
    modalCont.classList.add('show') 
}

function closeModal() {  
    document.body.classList.remove('overflow-hidden')
    modalCont.classList.remove('show')  
    modalContact.classList.remove('hide') 
}
function closeModalProps(e) {  
    if( e.target == modalCont ||  e.target == modalCloseCont) { 
        document.body.classList.remove('overflow-hidden');
        modalCont.classList.remove('show'); 
        modalContact.classList.remove('hide');
    }  
}
 
 
    new Selectr('#yourcity', { 
        searchable: false
    }); 
 
    
    $(document).ready(function(){
      $(".owl-carousel").owlCarousel({ 
        loop: true,  
        nav: true,  
        dotsEach: true,
        responsive: {
          0:{
              items:1,
              margin: 0,
          },
          768:{
              items:2, 
              margin: 0,
          }
      }
      });
    });
$(window).scroll(function() {
    if ($(this).scrollTop() > 1){  
        $('header').addClass("sticky");
    }
    else{
        $('header').removeClass("sticky");
    }
});
let tableRow = document.querySelectorAll('.service-table table.active tbody tr'), 
    tableRowClick = document.querySelectorAll('.service-table table tbody tr'), 
    tableBtn = document.querySelector('.js-table-btn'),
    tableBtnLink = document.querySelector('.js-table-btn a'), 
    flag = 0,
    countRow = 6; 


let btnTab = document.querySelectorAll('.js-table-head'); 
let btnTabLi = document.querySelectorAll('.js-tab-head li'); 
let contentTab = document.querySelectorAll('.js-table');

tableBtn.addEventListener('click', moreRow) 

for (let i = 0 ; i< tableRowClick.length; i++) { 
    tableRowClick[i].addEventListener('click', openModal)  
} 

function hideRow () { 
    let tableRow = document.querySelectorAll('.service-table table.active tbody tr'), 
    tableBtn = document.querySelector('.js-table-btn'),
    tableBtnLink = document.querySelector('.js-table-btn a'),
    flag = 0,
    countRow = 6; 
 
    if(tableRow.length <= countRow) { 
        tableBtnLink.classList.add('d-none')
    }
    else { 
        
        tableBtnLink.classList.remove('d-none')
    }

    for (let i = 0 ; i< tableRow.length; i++) {  
        if( i >= countRow) { 
            tableRow[i].classList.add('d-none')
        }
    } 
    
    tableBtnLink.innerHTML = "Увидеть все возможные поломки";
}
hideRow () 

function moreRow (e) { 
    let tableRow = document.querySelectorAll('.service-table table.active tbody tr') 
    e.preventDefault() 
    if(flag == 0) {  
         for (let i = 0 ; i< tableRow.length; i++) { 
            tableRow[i].classList.remove('d-none') 
        }
      
        tableBtnLink.innerHTML = "Скрыть";
        flag = 1; 
    }
    else { 
        for (let i = 0 ; i< tableRow.length; i++) { 
            if( i >= countRow) { 
                tableRow[i].classList.add('d-none')
            }
        }
      
        tableBtnLink.innerHTML = "Увидеть все возможные поломки";
        flag = 0;
    }
   
}

for(let i = 0; i < btnTab.length; i++) {
    btnTab[i].addEventListener('click', function(e) {  
        let bntAtr = e.target.getAttribute('data-htable')
         
        // btnTab[i].classList.add('active') 
        
        $(btnTab[i]).addClass('active') 

        for(let n = 0 ; n < btnTab.length; n++ ) { 
            if( n == i) continue;
            btnTab[n].classList.remove('active') ; 
        }

        showContentTab(bntAtr)

    })   
} 

function showContentTab(att) { 
    flag=0;
    
    for(let i = 0; i < contentTab.length; i++) {
        if(contentTab[i].getAttribute('data-table') == att) { 
            contentTab[i].classList.add('active'); 
            
            for(let n = 0 ; n < contentTab.length; n++ ) { 
                if( n == i) continue;
                contentTab[n].classList.remove('active') ;
            }
        }
    }
     
    hideRow () 
}
 
let dis = document.querySelectorAll('.timer'); 
        
var today = new Date(); 
let countMount = today.getMonth()
let mounthName = {
    0: 'Января',
    1: 'Февраля',
    2: 'Марта',
    3: 'Апреля',
    4: 'Мая',
    5: 'Июня',
    6: 'Июля',
    7: 'Августа',
    8: 'Сентября',
    9: 'Октября',
    10: 'Ноявря',
    11: 'Декабря' 
}  


for( let i = 0; i<dis.length; i++) { 
    dis[i].innerHTML = mounthName[countMount] ; 
} 